function getCurrentDate(){var t=new Date,a=t.getDate(),e=t.getMonth()+1,o=t.getFullYear();a<10&&(a="0"+a),e<10&&(e="0"+e);var t=a+"/"+e+"/"+o;return t}function generateUUID(){var t=(new Date).getTime(),a="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var e=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"==a?e:3&e|8).toString(16)});return a}function randomFour(){var t=Math.floor(1e3+9e3*Math.random());return t}function slugify(t){return t.toString().toLowerCase().replace(/\s+/g,"-").replace(/[^\w\-]+/g,"").replace(/\-\-+/g,"-").replace(/^-+/,"").replace(/-+$/,"")}var config={apiKey:"AIzaSyBuddga2i4I97hq18krbZ5EhTehY_EBy1Q",authDomain:"usable-post.firebaseapp.com",databaseURL:"https://usable-post.firebaseio.com",storageBucket:"usable-post.appspot.com"};firebase.initializeApp(config);var db={jobs:firebase.database().ref("jobs")},postList={template:"#postList",data:function(){return{jobs:[]}},watch:{$route:"fetchData"},created:function(){this.fetchData()},methods:{fetchData:function(){var t=this;db.jobs.once("value",function(a){a.forEach(function(a){var e=a.val();t.jobs.push(e)})})}}},newJob={template:"#addJob",data:function(){return{jobs:{}}},methods:{save:function(){var t=getCurrentDate();this.jobs.slug=generateUUID(),this.jobs.slugifiedTitle=slugify(this.jobs.title),this.jobs.slugifiedCompanyName=slugify(this.jobs.companyName);var a=randomFour();db.jobs.child(this.jobs.slug).set({title:this.jobs.title,location:this.jobs.location,type:this.jobs.type,description:this.jobs.description,salary:this.jobs.salary,applicationMethod:this.jobs.applicationMethod,companyName:this.jobs.companyName,companyWebsite:this.jobs.companyWebsite,adminContactName:this.jobs.adminContactName,adminContactEmail:this.jobs.adminContactEmail,approved:!1,key:this.jobs.slug,slug:a+"-"+this.jobs.slugifiedTitle+"-"+this.jobs.slugifiedCompanyName,timestamp:t}),this.$router.push("/")}}},viewJob={template:"#singleJob",data:function(){return{jobs:[]}},watch:{$route:"fetchData"},created:function(){this.fetchData()},methods:{fetchData:function(){var t=this;db.jobs.child(this.$route.params.slug).once("value",function(a){null===a.val()?router.push("/404"):t.jobs=a.val()})}}},editJob={template:"#addJob",data:function(){return{jobs:[]}},watch:{$route:"fetchData"},created:function(){this.fetchData()},methods:{fetchData:function(){var t=this;db.jobs.child(this.$route.params.slug).once("value",function(a){null===a.val()?router.push("/404"):t.jobs=a.val()})},save:function(){this.jobs.slugifiedTitle=slugify(this.jobs.title),this.jobs.slugifiedCompanyName=slugify(this.jobs.companyName),db.jobs.child(this.$route.params.slug).update({title:this.jobs.title,location:this.jobs.location,type:this.jobs.type,description:this.jobs.description,salary:this.jobs.salary,applicationMethod:this.jobs.applicationMethod,companyName:this.jobs.companyName,companyWebsite:this.jobs.companyWebsite,adminContactName:this.jobs.adminContactName,adminContactEmail:this.jobs.adminContactEmail,approved:this.jobs.approved}),this.$router.push("/admin")}}},adminHome={template:"#adminHome",data:function(){return{jobs:[]}},watch:{$route:"fetchData"},created:function(){this.fetchData()},methods:{fetchData:function(){var t=this;db.jobs.once("value",function(a){a.forEach(function(a){var e=a.val();t.jobs.push(e)})})}}},notFound={template:"#NotFound"},router=new VueRouter({routes:[{name:"home",path:"/",component:postList},{name:"newJob",path:"/add-job",component:newJob},{name:"viewJob",path:"/posts/:slug",component:viewJob},{name:"adminHome",path:"/admin",component:adminHome},{name:"editJob",path:"/admin/posts/:slug",component:editJob},{name:"404",path:"/404",component:notFound}]}),app=new Vue({router:router}).$mount("#app");